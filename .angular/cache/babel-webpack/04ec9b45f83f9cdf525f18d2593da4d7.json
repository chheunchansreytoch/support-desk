{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nlet ManageCasesPageComponent = class ManageCasesPageComponent {\n  constructor(dialog, dialogService, caseStore, statusStore, priorityStore, managerStore, formBuilder) {\n    this.dialog = dialog;\n    this.dialogService = dialogService;\n    this.caseStore = caseStore;\n    this.statusStore = statusStore;\n    this.priorityStore = priorityStore;\n    this.managerStore = managerStore;\n    this.formBuilder = formBuilder;\n    this.selectedValue = 'none';\n    this.arrCases = [];\n    this.arrStatuses = [];\n    this.arrPriorities = [];\n    this.arrManagers = []; //createCasetoogleTag\n\n    this.showCasePopup = false; //assignCasetoogleTag\n\n    this.showAssignPopup = false; //department button\n\n    this.showdepartmentBtn = false; // onClickCreateCase() {\n    //   this.dialogService.openCreateCaseDialog();\n    // }\n    // *** create select departments ***\n\n    this.SelectAgentName = '';\n    this.departments_IT = [{\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }]; // checkStatusValue() {\n    //   let value = Object(this.departments_IT)[\"status\"];\n    //   console.log(value);\n    // }\n\n    this.departments_account = [{\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }];\n    this.departments_payroll = [{\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Working\"\n    }, {\n      all: \"\",\n      name: \"Chheun Chansreytoch\",\n      status: \"Closed\"\n    }]; // checkbox table\n\n    this.checks = false; // checkToAssign list\n\n    this.Checked = false;\n    this.creatingCaseForm = formBuilder.group({\n      status: new FormControl('', Validators.required),\n      priority: new FormControl('', Validators.required),\n      subject: new FormControl('', Validators.required),\n      description: new FormControl('', Validators.required)\n    }, {\n      validators: ConfirmedValidator('status', 'priority')\n    }); // console.log(\"hiiiiiiiii\",this.creatingCaseForm.hasError());\n  }\n\n  fetchCases() {\n    this.caseStore.getCases().subscribe(res => {\n      this.arrCases = res;\n    });\n  }\n\n  fetchStatuses() {\n    this.statusStore.getStatuses().subscribe(res => {\n      this.arrStatuses = res;\n    });\n  }\n\n  fetchPriorities() {\n    this.priorityStore.getPriorities().subscribe(res => {\n      this.arrPriorities = res;\n    });\n  }\n\n  fetchManagers() {\n    this.managerStore.getManagers().subscribe(res => {\n      this.arrManagers = res;\n    });\n  }\n\n  btnSubmitClicked() {}\n\n  formSubmitted(formData) {\n    if (this.creatingCaseForm.valid) {\n      const {\n        status,\n        priority\n      } = formData;\n      const finalData = Object.assign(Object.assign({}, formData), {\n        createdBy: this.managerStore.getCurrentUser.id,\n        status: {\n          id: status\n        },\n        priority: {\n          id: priority\n        }\n      });\n      console.log(finalData);\n      this.caseStore.addCase(finalData).subscribe(res => {\n        this.arrManagers.push(finalData);\n        this.creatingCaseForm.reset();\n      });\n      console.log(\"Case was created successfully!\");\n    }\n  }\n\n  ngOnInit() {\n    this.fetchCases();\n    this.fetchStatuses();\n    this.fetchPriorities();\n    this.fetchManagers();\n  }\n\n  createCasetoogleTag() {\n    this.showCasePopup = !this.showCasePopup;\n  }\n\n  assignCasetoogleTag() {\n    this.showAssignPopup = !this.showAssignPopup;\n    this.createCasetoogleTag();\n  }\n\n  departmentBtn() {\n    this.showdepartmentBtn = !this.showdepartmentBtn;\n  }\n\n  radioChangeHandler(e) {\n    this.SelectAgentName = e.target.value;\n  }\n\n  checkAll(e) {\n    if (e.target.checked == true) {\n      this.checks = true;\n    } else {\n      this.checks = false;\n    }\n  }\n\n  isChecked(e) {\n    if (e.target.checked == true) {\n      this.Checked = true;\n    } else {\n      this.Checked = false;\n    }\n  }\n\n};\nManageCasesPageComponent = __decorate([Component({\n  selector: 'app-manage-cases-page',\n  templateUrl: './manage-cases-page.component.html',\n  styleUrls: ['./manage-cases-page.component.scss']\n})], ManageCasesPageComponent);\nexport { ManageCasesPageComponent };\nexport function ConfirmedValidator(controlName, matchingControlName) {\n  return formGroup => {\n    const control = formGroup.controls[controlName];\n    const matchingControl = formGroup.controls[matchingControlName];\n\n    if (matchingControl.errors && !matchingControl.errors.confirmedValidator) {\n      return;\n    }\n\n    if (control.value !== matchingControl.value) {\n      matchingControl.setErrors({\n        confirmedValidator: true\n      });\n    } else {\n      matchingControl.setErrors(null);\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"module"}