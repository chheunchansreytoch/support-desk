{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { observable } from \"mobx\";\nimport { HttpHeaders } from \"@angular/common/http\";\nimport { throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class ManagerStore {\n  constructor(httpClient, router) {\n    var _a;\n\n    this.httpClient = httpClient;\n    this.router = router;\n    this.isLoading = false;\n    this.endpoint = 'http://localhost:3000/api';\n    this.httpHeader = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET,POST,OPTIONS,DELETE,PUT'\n      })\n    };\n    this.httpHeaderWithToken = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET,POST,OPTIONS,DELETE,PUT',\n        'Authorization': 'Bearer ' + ((_a = this.managerJSONMapping()) === null || _a === void 0 ? void 0 : _a.token)\n      })\n    };\n  }\n\n  managerJSONMapping() {\n    const result = localStorage.getItem(\"manager_auth\") ? JSON.parse(localStorage.getItem(\"manager_auth\") || '{}') : undefined;\n    return result;\n  } // @computed\n  // get isLoggedIn(): boolean {\n  //   const manager = localStorage.getItem('manager_auth');\n  //   return manager != null ? true : false;\n  // }\n  // @action\n  // login(firstname: string, lastname: string, email: string, password: string) {\n  //   try {\n  //     this.httpClient.post<IManager>(\n  //       this.endpoint + '/managers/login',\n  //       JSON.stringify({ firstname, lastname, email, password }), this.httpHeader)\n  //     .pipe(\n  //       retry(1),\n  //       catchError(this.processError)\n  //     ).subscribe((result) => {\n  //       localStorage.setItem(\"manager_auth\", JSON.stringify(result));\n  //       this.router.navigate(['/admin']);\n  //       console.log(\"correct\");\n  //     });\n  //   } catch(error) {\n  //     console.log('login errer ln.52: ', error)\n  //   }\n  // }\n  // @action\n  // getUsers(): Observable<IManager> {\n  //   return this.httpClient.get<IManager>(this.endpoint + '/managers', this.httpHeaderWithToken)\n  //   .pipe(\n  //     retry(1),\n  //     catchError(this.processError)\n  //   )\n  // }\n  // @action\n  // getUser(id, data): Observable<IManager> {\n  //   return this.httpClient.get<IManager>(this.endpoint + '/managers/' + id, JSON.stringify(data), this.httpHeader)\n  //   .pipe(\n  //     retry(1),\n  //     catchError(this.processError)\n  //   )\n  // }\n  // @action\n  // addManager(data: IManager): Observable<IManager> {\n  //   return this.httpClient.post<IManager>(this.endpoint + '/managers/create', JSON.stringify(data), this.httpHeader)\n  //   .pipe(\n  //     retry(1),\n  //     catchError(this.processError)\n  //   )\n  // }\n  // @action\n  // updateUser(id, data): Observable<IManager> {\n  //   return this.httpClient.put<IManager>(this.endpoint + '/managers/' + id, JSON.stringify(data), this.httpHeader)\n  //   .pipe(\n  //     retry(1),\n  //     catchError(this.processError)\n  //   )\n  // }\n  // @action\n  // deleteUser(id){\n  //   return this.httpClient.delete<IManager>(this.endpoint + '/managers/' + id, this.httpHeader)\n  //   .pipe(\n  //     retry(1),\n  //     catchError(this.processError)\n  //   )\n  // }\n\n\n  processError(err) {\n    let message = '';\n\n    if (err.error instanceof ErrorEvent) {\n      message = err.error.message;\n    } else {\n      message = `Error Code: ${err.status}\\nMessage: ${err.message}`;\n    }\n\n    console.log(message);\n    return throwError(message);\n  }\n\n}\n\nManagerStore.ɵfac = function ManagerStore_Factory(t) {\n  return new (t || ManagerStore)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n};\n\nManagerStore.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ManagerStore,\n  factory: ManagerStore.ɵfac,\n  providedIn: 'root'\n});\n\n__decorate([observable], ManagerStore.prototype, \"isLoading\", void 0);\n\n__decorate([observable], ManagerStore.prototype, \"manager\", void 0);","map":null,"metadata":{},"sourceType":"module"}